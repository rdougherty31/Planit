{"ast":null,"code":"var _jsxFileName = \"c:\\\\Users\\\\rdoug\\\\Planit\\\\client\\\\src\\\\pages\\\\signup.js\";\n//sign up page\nimport React, { Component } from \"react\"; // import { BrowserRouter } from \"react-router-dom\";\n\nimport { Redirect } from \"react-router\";\nimport Cookies from \"js-cookie\";\nimport SignUpBtn from \"../components/SignupBtn\"; // import TopInterests from \"../components/TopInterests\";\n// import OtherInterests from \"../components/OtherInterests\";\n\nimport API from \"../utils/API\";\n\nclass SignUp extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      name: \"\",\n      username: \"\",\n      password: \"\",\n      redirect: false,\n      cookieUsername: \"\",\n      cookieID: \"\"\n    };\n\n    this.componentDidMount = () => {\n      console.log('yo');\n      API.getUsers().then(res => console.log(res));\n      API.getPosts().then(res => console.log(res));\n    };\n\n    this.handleInputChange = async event => {\n      const name = event.target.name;\n      const value = event.target.value;\n      await this.setState({\n        [name]: value\n      });\n      console.log(this.state);\n    };\n\n    this.handleFormSubmit = event => {\n      event.preventDefault(); // let uNameExists = false;\n      // function checking if username exists already - if does prompts for new entry, if not creates new user\n      // this.setState({\n      //     cookieUsername: JSON.parse(atob(Cookies.get(\"session\"))).username,\n      //     cookieID: JSON.parse(atob(Cookies.get(\"session\"))).id\n      // });\n      // API.getUsers()\n      //     .then(res => {\n      //         console.log(uNameExists);\n      //         // console.log(res.data[0].username);\n      //         console.log(this.state.username);\n      //         this.setState({\n      //             cookieUsername: JSON.parse(atob(Cookies.get(\"session\"))).username,\n      //             cookieID: JSON.parse(atob(Cookies.get(\"session\"))).id\n      //         });\n      //         for (var i = 0; i < res.data.length; i++) {\n      //             if (res.data[i].username === this.state.username) {\n      //                 uNameExists = true;\n      //             }\n      //         }\n      //         uNameExists ? console.log(\"this username already exists\") : console.log(\"create new user\");\n      //         if (!uNameExists) {\n      //             console.log(this.state)\n      //             API.createUser({\n      //                 name: this.state.name,\n      //                 username: this.state.username,\n      //                 pword: this.state.password\n      //             }).then(response => {\n      //                 console.log(this.state.username + \" created\")\n      //             }).catch(error => console.log(error));\n      //         }\n      //         uNameExists ? alert(\"This username already exists. Please choose a different one.\") : alert(\"Welcome, \" + this.state.username + \"!\");\n      //     })\n\n      API.getOneUser(this.state.username).then(response => {\n        console.log(\"Response JSON\");\n        console.log(response); // *******************************************\n        // check username bug\n\n        if (response) {\n          console.log(\"User already exists\");\n          alert(\"This username already exists.\");\n          this.setState({\n            username: \"\",\n            pword: \"\",\n            redirect: false,\n            cookieUsername: \"\",\n            cookieID: \"\"\n          });\n          console.log(\"State after 1st if \" + this.state);\n        } else {\n          console.log(\"User does not exist\");\n          console.log(\"Response.data.password = \" + response.data.pword);\n\n          if (response.data.pword !== this.state.pword) {\n            console.log(\"Incorrect Password\");\n            alert(\"Invalid username or password\");\n            this.setState({\n              username: \"\",\n              pword: \"\",\n              redirect: false,\n              cookieUsername: \"\",\n              cookieID: \"\"\n            });\n            console.log(\"State after 2nd if \" + this.state);\n          } else {\n            API.createUser({\n              name: this.state.name,\n              username: this.state.username,\n              pword: this.state.password\n            }).then(response => {\n              console.log(this.state.username + \" created\");\n              alert(this.state.username + \" has been created!\");\n            }).catch(error => console.log(error));\n            this.setState({\n              redirect: true,\n              cookieUsername: JSON.parse(atob(Cookies.get(\"session\"))).username,\n              cookieID: JSON.parse(atob(Cookies.get(\"session\"))).id\n            });\n          }\n        }\n\n        console.log(\"response JSON end\");\n      }).catch(err => console.log(err));\n    };\n  }\n\n  render() {\n    const redirect = this.state.redirect;\n\n    if (redirect) {\n      return React.createElement(Redirect, {\n        to: \"/signin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      id: \"signupForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"signupName\",\n      type: \"text\",\n      name: \"name\",\n      placeholder: \"Name\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      id: \"signupUName\",\n      type: \"text\",\n      name: \"username\",\n      placeholder: \"Username\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      id: \"signupPword\",\n      type: \"text\",\n      name: \"password\",\n      placeholder: \"Password\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(SignUpBtn, {\n      onClick: this.handleFormSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default SignUp;","map":{"version":3,"sources":["c:\\Users\\rdoug\\Planit\\client\\src\\pages\\signup.js"],"names":["React","Component","Redirect","Cookies","SignUpBtn","API","SignUp","state","name","username","password","redirect","cookieUsername","cookieID","componentDidMount","console","log","getUsers","then","res","getPosts","handleInputChange","event","target","value","setState","handleFormSubmit","preventDefault","getOneUser","response","alert","pword","data","createUser","catch","error","JSON","parse","atob","get","id","err","render"],"mappings":"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","sourcesContent":["//sign up page\r\nimport React, { Component } from \"react\";\r\n// import { BrowserRouter } from \"react-router-dom\";\r\nimport { Redirect } from \"react-router\";\r\nimport Cookies from \"js-cookie\";\r\nimport SignUpBtn from \"../components/SignupBtn\"\r\n// import TopInterests from \"../components/TopInterests\";\r\n// import OtherInterests from \"../components/OtherInterests\";\r\nimport API from \"../utils/API\";\r\n\r\n\r\nclass SignUp extends Component {\r\n    state = {\r\n        name: \"\",\r\n        username: \"\",\r\n        password: \"\",\r\n        redirect: false,\r\n        cookieUsername: \"\",\r\n        cookieID: \"\"\r\n    };\r\n    componentDidMount = () => {\r\n        console.log('yo');\r\n        API.getUsers().then((res) => console.log(res));\r\n        API.getPosts().then((res) => console.log(res));\r\n    }\r\n\r\n    handleInputChange = async event => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n        await this.setState({\r\n            [name]: value\r\n        });\r\n        console.log(this.state);\r\n    }\r\n    handleFormSubmit = event => {\r\n        event.preventDefault();\r\n        // let uNameExists = false;\r\n        // function checking if username exists already - if does prompts for new entry, if not creates new user\r\n        // this.setState({\r\n        //     cookieUsername: JSON.parse(atob(Cookies.get(\"session\"))).username,\r\n        //     cookieID: JSON.parse(atob(Cookies.get(\"session\"))).id\r\n        // });\r\n        // API.getUsers()\r\n        //     .then(res => {\r\n        //         console.log(uNameExists);\r\n        //         // console.log(res.data[0].username);\r\n        //         console.log(this.state.username);\r\n        //         this.setState({\r\n        //             cookieUsername: JSON.parse(atob(Cookies.get(\"session\"))).username,\r\n        //             cookieID: JSON.parse(atob(Cookies.get(\"session\"))).id\r\n        //         });\r\n        //         for (var i = 0; i < res.data.length; i++) {\r\n        //             if (res.data[i].username === this.state.username) {\r\n        //                 uNameExists = true;\r\n        //             }\r\n        //         }\r\n        //         uNameExists ? console.log(\"this username already exists\") : console.log(\"create new user\");\r\n        //         if (!uNameExists) {\r\n        //             console.log(this.state)\r\n        //             API.createUser({\r\n        //                 name: this.state.name,\r\n        //                 username: this.state.username,\r\n        //                 pword: this.state.password\r\n        //             }).then(response => {\r\n        //                 console.log(this.state.username + \" created\")\r\n        //             }).catch(error => console.log(error));\r\n        //         }\r\n        //         uNameExists ? alert(\"This username already exists. Please choose a different one.\") : alert(\"Welcome, \" + this.state.username + \"!\");\r\n        //     })\r\n\r\n        API.getOneUser(this.state.username)\r\n            .then(response => {\r\n                console.log(\"Response JSON\");\r\n                console.log(response);\r\n                // *******************************************\r\n                // check username bug\r\n                if (response) {\r\n                    console.log(\"User already exists\");\r\n                    alert(\"This username already exists.\");\r\n                    this.setState({\r\n                        username: \"\",\r\n                        pword: \"\",\r\n                        redirect: false,\r\n                        cookieUsername: \"\",\r\n                        cookieID: \"\"\r\n                    });\r\n                    console.log(\"State after 1st if \" + this.state);\r\n                } else {\r\n                    console.log(\"User does not exist\");\r\n                    console.log(\"Response.data.password = \" + response.data.pword);\r\n                    if (response.data.pword !== this.state.pword) {\r\n                        console.log(\"Incorrect Password\");\r\n                        alert(\"Invalid username or password\");\r\n                        this.setState({\r\n                            username: \"\",\r\n                            pword: \"\",\r\n                            redirect: false,\r\n                            cookieUsername: \"\",\r\n                            cookieID: \"\"\r\n                        });\r\n                        console.log(\"State after 2nd if \" + this.state);\r\n                    } else {\r\n                        API.createUser({\r\n                            name: this.state.name,\r\n                            username: this.state.username,\r\n                            pword: this.state.password\r\n                        }).then(response => {\r\n                            console.log(this.state.username + \" created\")\r\n                            alert(this.state.username + \" has been created!\");\r\n                        }).catch(error => console.log(error));\r\n                        this.setState({\r\n                            redirect: true,\r\n                            cookieUsername: JSON.parse(atob(Cookies.get(\"session\"))).username,\r\n                            cookieID: JSON.parse(atob(Cookies.get(\"session\"))).id\r\n                        })\r\n                    }\r\n                }\r\n                console.log(\"response JSON end\");\r\n            })\r\n\r\n\r\n            .catch(err => console.log(err));\r\n    };\r\n\r\n    render() {\r\n        const { redirect } = this.state;\r\n        if (redirect) {\r\n            return <Redirect to=\"/signin\" />;\r\n        }\r\n        return (\r\n            <div>\r\n                <form id=\"signupForm\">\r\n                    <input id=\"signupName\" type=\"text\" name=\"name\" placeholder=\"Name\" onChange={this.handleInputChange} />\r\n                    <input id=\"signupUName\" type=\"text\" name=\"username\" placeholder=\"Username\" onChange={this.handleInputChange} />\r\n                    <input id=\"signupPword\" type=\"text\" name=\"password\" placeholder=\"Password\" onChange={this.handleInputChange} />\r\n                    <SignUpBtn onClick={this.handleFormSubmit}></SignUpBtn>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default SignUp;"]},"metadata":{},"sourceType":"module"}